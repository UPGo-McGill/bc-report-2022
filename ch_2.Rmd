---
title: "Chapter 2. The impact of short-term rentals on housing availability and affordability in British Columbia"
output: pdf_document
date: '2022-05-25'
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)

qload(here("output", "/ch_2.qsm"))

```

Like many other Canadian provinces, the housing market in British Columbia has been experiencing large price increases in both rents and property values, and increasingly so since the Covid-19 pandemic. This chapter uses housing data retrieved from the 2016 Canadian census and the Canadian Mortgage and Housing Corporation to determine the impact of commercially-operated short-term rentals on the rent levels in the province's Census Metropolitan Areas (CMA) and Census Agglomerations (CA).

## STR-induced housing loss

BC's housing market has been under considerable stress in the past years, with housing prices and rents rising, and rental vacancy rates falling. These are symptoms of a market where the supply of housing is insufficient to meet demand. One possible explanation for both the insufficient supply and elevated demand for housing in BC is the growth in short-term rentals. Tourists are now able to compete with residents for housing---adding demand to the local housing market---while landlords are now able to shift their properties out of the conventional housing market to become dedicated STRs---reducing the supply of conventional housing. Research has found that renting a housing unit on the STR market frequently offers landlords greater potential revenue than conventional leases (Wachsmuth & Weisler 2018), especially in transit-accessible neighborhoods (Deboosere et al. 2019). Multiple studies have also found that Airbnb and other STR platforms increase housing costs (Barron, Kung, & Proserpio 2017; Horn & Merante 2017; Garcia-Lopez et al. 2019).

One of the major considerations when gauging the impacts of short-term rentals (STRs) on a city, therefore, is the extent to which STRs are removing long-term housing from the market. This process can occur either directly, where tenants of a unit are evicted or not replaced at the end of a lease and the unit is converted to a STR, or indirectly by absorbing new construction or investment properties which otherwise would have gone onto the long-term market. To obtain the exact number of units that have been occupied as STRs, landlords or units would need to be individually surveyed, which is infeasible because STR hosts are mostly anonymous on major STR platforms such as Airbnb and Vrbo. Instead, we use the daily activity of listings, alongside structural characteristics such as listing type and location, to estimate which listings are operating as dedicated STRs and are therefore not available as conventional long-term housing.

*Frequently Rented Entire-Home (FREH) listings:* The number of frequently-rented units is one way to estimate STR-induced housing loss. If a STR is available for reservations the majority of the year and receives many bookings, it is reasonable to assume that it is not serving as an individual's principal residence at the same time. Along these lines, we define frequently rented entire-home (FREH) listings as entire-home listings which were available on Airbnb or Vrbo the majority of the year (at least 183 nights) and were booked a minimum of 90 nights. We then apply a statistical model (described in the appendix) to the FREH data in order to generate an estimate of FREH activity based on three months of listing activity. This allows us to detect listings which are operating in a full-time manner but have not yet been listed for an entire year, and allows us to account for relatively short-term changes in market conditions.

*Ghost hostels:* In addition to FREH listings, it is possible that entire housing units have been subdivided into multiple private-room listings, each of which appearing to be a spare bedroom or the like, while actually collectively representing an apartment removed from the long-term housing market. We call these clusters of private- room listings "ghost hostels", building on the advocacy group Fairbnb.ca's term "ghost hotels" --- multiple FREH listings located in a single building, collectively serving as de facto hotels instead of long-term housing (Wieditz 2017). We detect ghost hostels by finding clusters of three or more private-room listings operated by a single host, whose reported locations are close enough to each other that they are likely to have originated in the same actual housing unit. (Airbnb and Vrbo obfuscate listing locations by shifting them randomly up to 200 m.)

At the end of 2021, there were `r freh_2021` FREH listings in Britsh Columbia, and `r gh_units_2021` more housing units which were operating as ghost hostels. (We refer to these listings collectively as "dedicated STRs".) In total, therefore, short-term rentals were taking `r housing_loss_2021` housing units off of BC's long-term market at the end of the year (Figure 7). In the absence of commercial STRs, in other words, there would have been `r housing_loss_2021` more homes available for BC residents to live in. Notably, while the number of active daily listings was `r active_decline_pct_2019_2021` lower in 2021 than in 2019, the number of housing units which STRs took off of BC's housing market decreased at only about half the rate. There were `r housing_loss_decline_pct_2019_2021` fewer dedicated STRs in 2021 (`r housing_loss_2021`) than in 2019 (`r housing_loss_2019`); province-wide, commercial operators have weathered the pandemic much better than home sharers.

```{r fig_7}

housing_loss |> 
  ggplot(aes(date, `Housing units`, fill = `Listing type`)) +
  geom_col(lwd = 0) +
  scale_fill_manual(values = col_palette[c(2, 4)]) +
  scale_x_date(name = NULL, limits = c(as.Date("2017-07-01"), NA)) +
  scale_y_continuous(name = NULL, label = scales::comma) +
  facet_wrap(~tier, scales = "free_y") +
  theme_minimal() +
  theme(legend.position = "bottom", 
        panel.grid.minor.x = element_blank())

```

As with other patterns related to STR activity during the pandemic, the large cities saw much more severe drops in dedicated STRs than smaller communities and resort towns did. The latter had nearly recovered to their pre-pandemic levels of dedicated STRs by the beginning of 2022, while the former were only beginning to emerge from the pandemic's negative demand shock. These facts further confirm the scenario identified above: that long-distance leisure trips were diverted to local destinations during the pandemic.

### Trend analysis: housing loss

Using trend analysis, it is possible to estimate how much STR-induced housing loss would have been expected to have occurred in the absence of the pandemic---this counterfactual scenario establishes an important baseline for a post-pandemic housing landscape, in which short-term rentals return to their previous growth trend. Figure 8 displays the shortfall between actual STR-induced housing loss and the housing loss which would have been expected in the absence of the pandemic. In the central cities and other areas of the largest urban areas of the province, there are several thousand fewer dedicated STRs than what pre-pandemic growth trends would have predicted. In particular, at the end of 2021, there were only `r housing_loss_cc_end_2021` housing units operating as dedicated STRs in Vancouver, Victoria, and Abbotsford, while the previous trend would have predicted `r housing_loss_cc_trend_end_2021`---`r housing_loss_cc_dif_pct_end_2021` more. By contrast, resort towns and non-urban areas had very little short fall between expected and actual dedicated STRs by the end of 2021. These areas have seen relatively robust and growing tourist accommodation demand from late 2020 onward.

```{r fig_8}

housing_loss_daily |> 
  group_by(tier) |>
  mutate(units_trend = slide_dbl(units_trend, mean, .before = 6, .complete = TRUE)) |>
  ungroup() |>
  select(tier, date, units, units_trend) |> 
  pivot_longer(-c(tier, date)) |> 
  filter(!is.na(value)) |> 
  mutate(label = case_when(
    tier == "All" & date == "2019-05-05" & name == "units" ~ "Actual housing loss", 
    tier == "All" & date == "2020-03-07" & name == "units_trend" ~ "Expected housing loss",
    TRUE ~ NA_character_)) |> 
  ggplot() +
  geom_ribbon(aes(x = date, ymin = units, ymax = units_trend, group = 1),
              data = {
                housing_loss_daily |> 
                  group_by(tier) |>
                  mutate(units_trend = slider::slide_dbl(units_trend, mean, .before = 6, .complete = TRUE)) |>
                  ungroup()}, fill = col_palette[3], alpha = 0.3) +
  geom_line(aes(date, value, color = name), lwd = 1) +
  geom_label(aes(date, value, label = label, color = name), size = 3) +
  scale_x_date(name = NULL, limits = as.Date(c("2018-01-01", NA))) +
  scale_y_continuous(name = NULL, limits = c(0, NA), 
                     label = scales::comma) +
  scale_color_manual(name = NULL, 
                     labels = c("Actual STR housing loss", 
                                "Expected STR housing loss"), 
                     values = col_palette[c(5, 1)]) +
  facet_wrap(~tier, scales = "free_y") +
  theme_minimal() +
  theme(legend.position = "none",
        panel.grid.minor.x = element_blank(),
        plot.background = element_rect(fill = "white", colour = "transparent"))

```

## The impact of dedicated STRs on residential rents in BC

There have been multiple studies that have looked at the impact of short-term rentals on housing, more specifically regarding vacancy rates, rents, property values, and displacement. The growth of STRs in the past years has effectively shrunk the size of local rental markets, by converting housing units which otherwise could house residents into tourist accommodations. Additionally, by offering a new revenue stream to homeowners and potentially some tenants who are willing to become part-time home sharers, STRs have increased the economic value of residential properties. Both phenomena would be expected to increase housing costs, since there is less available housing stock, and since the economic potential of the existing stock is increased.

While no empirical research exists in a Canadian context to evaluate the impact of STR growth on housing prices or rents, a US study answered these questions through an examination of every US Airbnb listing between 2012 and 2016. This study found that a 1% growth in STR listings in a location predicts a 0.018% increase in monthly rents and a 0.026% increase in house prices. While these numbers appear small, they are being multiplied by STR listing growth rates which have been quite high, so the authors find that the growth of Airbnb is responsible for one fifth of all rent growth and one seventh of housing price growth in the United States during the study period.

To answer this question in the Canadian context, we came up with our own methodology. We developed a linear regression model looking at the relationship between average rents and the percentage of frequently-rented entire home per dwellings in Census Metropolitan Areas (CMA), Census Agglomerations (CA), non-urban areas, and resort towns. Resort towns are municipalities that, according the census, have 12% or more of their labor employed in entertainment and recreation and accommodation and food businesses. Within the CMAs, we also differentiate between the entire CMA and the city centres, which include the cities of Vancouver, Victoria, and Abottsford. We used the October yearly average rents disclosed by the CMHC from 2016 to 2021 for every region in British Columbia with available data. Our models shows a strong positive relationship between the concentration of FREH listings and average rents.

### A regression model of dedicated STRs and residential rent

```{r freh_vs_rent}

rent_tier_1 <- 
cmhc$rent |> 
    filter(year == 2021, !is.na(tier)) |> 
    group_by(tier) |> 
    summarize(total = mean(total, na.rm = TRUE)) |> 
    mutate(total = paste0("$", prettyNum(round(total), big.mark = ",")))

rent_tier <- rent_tier_1$total
names(rent_tier) <- rent_tier_1$tier

```

Based on 2016-2021 data, in British Columbia, average rent prices were highest in the census metropolitan areas (`r rent_tier[["CMA"]]`) and their central cities (`r rent_tier[["CC"]]`), followed by non-urban areas (`r rent_tier[["NU"]]`), resorts (`r rent_tier[["RES"]]`) and then census agglomerations (`r rent_tier[["CA"]]`). We found that the number of frequently rented entire-home listings per dwellings had a significant predictive effect on these rents.

```{r make_fig_CHAPNUM_1}

find_outliers <- function(x) {
  q1 <- quantile(x, 0.25, na.rm = TRUE)
  q3 <- quantile(x, 0.75, na.rm = TRUE)
  iqr <- (q3 - q1) * 1.5
  which(x < q1 - iqr | x > q3 + iqr)
}

figure_CHAPNUM_1_fun <- function(regular = "", condensed = "") {

cmhc_str[-find_outliers(cmhc_str$freh_p_dwellings), ] |> 
  mutate(year = year + 2016) |> 
  filter(!is.na(tier)) |> 
  ggplot(aes(freh_p_dwellings, total_rent)) +
  geom_point(aes(color = year), size = 0.5) +
  geom_smooth(color = "black", se = FALSE, method = "lm", level = 0.95) +
  facet_wrap(~tier, scales = "free")
  
}

if (build_figures) {
  ggsave(here("output", "figures", "figure_5_1.pdf"),
         plot = figure_CHAPNUM_1_fun("Futura", "Futura Condensed"),
         width = 8, height = 5, units = "in", useDingbats = FALSE)
  extrafont::embed_fonts(here("output", "figures", "figure_5_1.pdf"))
}

```

```{r fig-CHAPNUM-1, include = TRUE, fig.cap = '(ref:fig-CHAPNUM-1)', fig.align = "center"}
figure_CHAPNUM_1_fun()
```

(ref:fig-CHAPNUM-1) *Positive relationship between the percentage of frequently rented entire home listings per dwellings and rent prices*

Figure \@ref(fig:fig-5-1) illustrates the positive relationship, in every city category, between the percentage of frequently rented entire-home listings per dwellings and rent prices. The relationship is clear: the higher the percentage of FREH listings, the higher the rents. Table \@ref(tab:model-table) shows the statistical model we developed to predict the effect of more or less commercially-operated short-term rentals.

We found three variables which successfully and significantly predicted average rental prices. The first variable is the percentage of FREH per dwellings. A rise of a point of percentage of this figure leads to a `r paste0("$", round(model$coefficients[["freh_p_dwellings"]], digits = 2))` increase in rent. The second variable is the year. Every additional year sees an increase of `r paste0("$", round(model$coefficients[["year"]], digits = 2))` in rent. This is quite intuitive, since rent prices tend to increase by a small percentage every year. Finally, the last variable of interest is the geographic region. The model predicts that rental prices should be adjusted upward more with the intercept in CMAs than in non-urban areas.

```{r model-table, results = "asis", include=T}
model_pretty <- model

names(model_pretty$coefficients) <- c('FREH/dwellings', 'Renter (%)','Year (0 = 2016)','Tier - Census Agglomeration','Tier - Central City', 'Tier - Census Metropolitan Area','Tier - Non-urban','Tier - Resort')
stargazer::stargazer(model_pretty, type = "latex", single.row = T, dep.var.labels = "Average rent")

```

(ref:tab-model-table) *Average rent prices rent regression model using STR activity as a predictive coefficient*

### Case studies on the impact of STR market activities on rental prices

The model was applied to the entire population of entire-home STR in British Columbia that was present in a CMHC neighbourhood zone, where we have access to rent prices data. As examples of what this model entails, Table \@ref(tab:tab-pred) shows case studies for given locations of interest, their rent prices in 2021, the expected rise in the number of FREH in 2022 (From the trend analysis model previously visited TKTKTKTKTK), and the impact it might have on rent prices.

```{r model-practical, include=T}

library(kableExtra)

locations <- 
c("Core Area (Kelowna)" = "Core Area",
  "City Center (Vancouver)" = "Hastings/Sunrise/Grandview/Woodlands",
  "Outlying (Prince George)" = "Outlying",
  "Newton (Surrey)" = "Newton",
  "Summerland" = "Summerland")

model_table <- 
map2_dfr(locations, names(locations), ~{
  
  data <- 
    cmhc_str |> 
    filter(neighbourhood == .x,
           year + 2016 == 2021)
  
  modeled <- 
    data |> 
    transmute(year = 2022 - 2016,
              freh_p_dwellings = FREH * 1.10 / dwellings * 100)
  
  rise_rent_result_FREH <- 
    (modeled$freh_p_dwellings - data$freh_p_dwellings) * 
    model$coefficients[["freh_p_dwellings"]]
  
  new_rent <- 
  # Previous rent
  data$total_rent + 
    # Years addition
    (modeled$year - data$year) * model$coefficients[["year"]] +
    # FREH per dwellings addition
    rise_rent_result_FREH

  tibble(`CMHC neighbourhood` = .y,
         `City Tier` = case_when(data$tier == "CC" ~ "City Center",
                                 data$tier == "CMA" ~ "Census Metropolitan Area",
                                 data$tier == "CA" ~ "Census Agglomeration",
                                 data$tier == "RES" ~ "Resort",
                                 data$tier == "NU" ~ "Non-urban"),
         `FREH/dwellings (2021)` = 
           scales::percent(data$freh_p_dwellings/100, accuracy = 0.01),
         `Rent (2021)` = 
           paste0("$", prettyNum(round(data$total_rent), big.mark = ",")),
         `FREH/dwellings (2022, expected)` = 
           scales::percent(modeled$freh_p_dwellings/100, accuracy = 0.01),
         `Rent (2022, expected)` = 
           paste0("$", prettyNum(round(new_rent), big.mark = ",")),
         `Rise due to STR activity` = 
           paste0("$", prettyNum(round(rise_rent_result_FREH, digits = 2),
                                 big.mark = ","))
         )
    
}) 

model_table |> 
  kbl(caption = "Impact of a 10% FREH increase in the most populated CMHC neighbourhoods (per tier)",
               align = "lrrrrr") %>% 
  kable_styling(latex_options = "scale_down")


```

(ref:tab-model-practical) *Applied model on particular zones of interest*

```{r core_area_2021}

core_area_rent_2021 <- 
  cmhc$rent |> 
  filter(year == 2021,
         neighbourhood == "Core Area") |> 
  pull(total) |> 
  (\(x) paste0("$", prettyNum(round(x), big.mark = ",")))()

core_area_cmhc_str_2021 <- 
cmhc_str |> 
  filter(neighbourhood == "Core Area",
         year + 2016 == 2021)

kelowna_prices_2021 <- 
  pull(model_table[str_detect(model_table$`CMHC neighbourhood`, "Kelowna"), "Rent (2021)"])

kelowna_FREH_p_2021 <- 
    pull(model_table[str_detect(model_table$`CMHC neighbourhood`, "Kelowna"), "FREH/dwellings (2021)"])

kelowna_rent_2022 <- 
    pull(model_table[str_detect(model_table$`CMHC neighbourhood`, "Kelowna"), "Rent (2022, expected)"])

kelowna_increase_due_STR <- 
    pull(model_table[str_detect(model_table$`CMHC neighbourhood`, "Kelowna"), "Rise due to STR activity"])


```

In 2021, the core area CMHC neighbourhood of Kelowna had average rent prices of `r kelowna_prices_2021`. Out of the `r prettyNum(round(core_area_cmhc_str_2021$dwellings), big.mark = ",")` dwellings, `r prettyNum(round(core_area_cmhc_str_2021$FREH), big.mark = ",")` were FREH listings, thus representing `r kelowna_FREH_p_2021` of all dwellings. The model lets us estimate that, all other things being equal, in 2022, a 10% increase in the total number of FREH in the zone would bring the average rent to `r kelowna_rent_2022`, which `r kelowna_increase_due_STR` could by attributed to the growth in STR activity.

### The burden of STR activity on renter households

```{r overpaid}

# All time
total_rent_paid_2016_2021 <- 
cmhc$rent |> 
  left_join(select(st_drop_geometry(cmhc_zones), cmhc_zone, renters), 
            by = c("neighbourhood" = "cmhc_zone")) |> 
  summarize(sum(total, na.rm = TRUE) * sum(renters, na.rm = TRUE)) |>
  pull()

total_rent_paid_due_STR_2016_2021 <- 
cmhc_str |> 
  mutate(less_rent = freh_p_dwellings * model$coefficients[["freh_p_dwellings"]]) |> 
  left_join(select(st_drop_geometry(cmhc_zones), cmhc_zone, renters), 
            by = c("neighbourhood" = "cmhc_zone")) |> 
  filter(!is.na(tier)) |> 
    summarize(sum(less_rent, na.rm = TRUE) * sum(renters, na.rm = TRUE)) |> 
  pull()

attributed_to_str_2016_2021 <- 
(total_rent_paid_due_STR_2016_2021 / 
  total_rent_paid_2016_2021) |> 
  scales::percent(accuracy = 0.02)

overpaid_2016_2021 <- 
total_rent_paid_due_STR_2016_2021 |> 
  round() |> 
  str_remove("\\d{9}$")


# 2019
total_rent_paid_2019 <- 
cmhc$rent |> 
  filter(year == 2019) |> 
  left_join(select(st_drop_geometry(cmhc_zones), cmhc_zone, renters), 
            by = c("neighbourhood" = "cmhc_zone")) |> 
  summarize(sum(total, na.rm = TRUE) * sum(renters, na.rm = TRUE)) |>
  pull()

total_rent_paid_due_STR_2019 <- 
cmhc_str |> 
    filter(year + 2016 == 2019) |> 
  mutate(less_rent = freh_p_dwellings * model$coefficients[["freh_p_dwellings"]]) |> 
  left_join(select(st_drop_geometry(cmhc_zones), cmhc_zone, renters), 
            by = c("neighbourhood" = "cmhc_zone")) |> 
  filter(!is.na(tier)) |> 
    summarize(sum(less_rent, na.rm = TRUE) * sum(renters, na.rm = TRUE)) |> 
  pull()

attributed_to_str_2019 <-
(total_rent_paid_due_STR_2019 / 
  total_rent_paid_2019) |> 
  scales::percent(accuracy = 0.02)


# Year overpaid
every_year_overpaid <- 
  map(set_names(2016:2021), ~{
    total_rent_paid <- 
      cmhc$rent |> 
      filter(year == .x) |> 
      left_join(select(st_drop_geometry(cmhc_zones), cmhc_zone, renters), 
                by = c("neighbourhood" = "cmhc_zone")) |> 
      summarize(sum(total, na.rm = TRUE) * sum(renters, na.rm = TRUE)) |>
      pull()
    
    total_rent_paid_due_STR <- 
      cmhc_str |> 
      filter(year + 2016 == .x) |> 
      mutate(less_rent = freh_p_dwellings * model$coefficients[["freh_p_dwellings"]]) |> 
      left_join(select(st_drop_geometry(cmhc_zones), cmhc_zone, renters), 
                by = c("neighbourhood" = "cmhc_zone")) |> 
      filter(!is.na(tier)) |> 
      summarize(sum(less_rent, na.rm = TRUE) * sum(renters, na.rm = TRUE)) |> 
      pull()
    
    (total_rent_paid_due_STR / 
        total_rent_paid) |> 
      scales::percent(accuracy = 0.02)
    
  })

```

Since 2016, BC tenants have paid more than \$3 trillion in rent. During the same time period, we estimate that `r attributed_to_str_2016_2021` (\$`r overpaid_2016_2021` billion) of this amount was due to the STR market activity. The year prior to the COVID-19 pandemic, 2019, at the peak of the STR market in British Columbia, `r attributed_to_str_2019` of the total prices of rent were overpaid by tenants due to STR market activities.

From 2016 to 2019, the amount of rent overpaid by tenants was increasing. In 2016, the percentage of rent overpaid due to the STR market activity was `r every_year_overpaid[["2016"]]`, `r every_year_overpaid[["2017"]]` in 2017, `r every_year_overpaid[["2018"]]` in 2018, and `r every_year_overpaid[["2019"]]` in 2019. This suggests that the percentage of rent attributed to STR market activity would have continued to increase if it were not for the COVID-19 pandemic. However, the rate of increase was marginally decreasing, suggesting that it would have eventually reached a plateau in future years.
